#!/usr/bin/env node

/**
 * <p>Copyright (c) 2012 by Appcelerator, Inc. All Rights Reserved.
 * Please see the LICENSE file for information about licensing.</p>
 * 
 * Provides a CLI for the code processor tests
 * @author Allen Yeung <ayeung@appcelerator.com> and Bryan Hughes <bhughes@appcelerator.com>
 */

var result,
	CodeProcessor = require("node-code-processor"),
	fileName = process.argv[2];

console.log("Processing file " + fileName);
result = CodeProcessor.process([fileName], [], null, {}, {
	invokeMethods: true,
	evaluateLoops: true,
	executionTimeLimit: 2000
});
if (result && result[0] === "throw") {
	process.exit(1);
}